{{- if .Values.node-problem-detector.enabled }}
apiVersion: plugins.kubegems.io/v1beta1
kind: Plugin
metadata:
  name: node-problem-detector
  namespace: {{ .Release.Namespace }}
spec:
  kind: helm
  repo: https://charts.deliveryhero.io
  installNamespace: {{ .Values.node-problem-detector.namespace }}
  enabled: {{ .Values.node-problem-detector.enabled }}
  version: {{ .Values.node-problem-detector.version }}
  values:
    image:
      # repository: quay.io/prometheus/node-exporter
      {{ include "common.images.repository" ( dict "registry" "k8s.gcr.io" "repository" "node-problem-detector/node-problem-detector" "context" .) }}
{{- end -}}