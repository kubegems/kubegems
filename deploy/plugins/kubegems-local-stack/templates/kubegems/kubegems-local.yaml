apiVersion: plugins.kubegems.io/v1beta1
kind: Plugin
metadata:
  name: kubegems-local
  namespace: "{{ .Release.Namespace }}"
spec:
  kind: helm
  enabled: true
  dependencies:
    - name: cert-manager
  values:
    agent:
      extraArgs:
        - --api-prometheusserver={{ .Values.kubegems.local.api.prometheus }}
        - --api-alertmanagerserver={{ .Values.kubegems.local.api.alertmanager }}
        - --api-lokiserver={{ .Values.kubegems.local.api.loki }}
        - --api-jaegerserber={{ .Values.kubegems.local.api.jaeger }}
      image:
        tag: "{{ .Values.kubegems.version }}"
        registry: "{{ .Values.kubegems.registry }}"
        repository: "{{ .Values.kubegems.repository }}"
    controller:
      image:
        tag: "{{ .Values.kubegems.version }}"
        registry: "{{ .Values.kubegems.registry }}"
        repository: "{{ .Values.kubegems.repository }}"
