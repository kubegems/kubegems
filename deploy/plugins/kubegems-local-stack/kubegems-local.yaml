apiVersion: plugins.kubegems.io/v1beta1
kind: Plugin
metadata:
  name: kubegems-local
  namespace: "{{ .Release.Namespace }}"
spec:
  kind: helm
  enabled: true
  dependencies:
    - name: cert-manager
  values:
    agent:
      extraArgs:
        - --api-prometheusserver=http://kube-prometheus-stack-prometheus.prometheus:9090
        - --api-alertmanagerserver=http://kube-prometheus-stack-alertmanager.prometheus:9093
        - --api-lokiserver=http://loki-stack.loki-stack:3100
        - --api-jaegerserber=http://jaeger-query.observability:16686
      image:
        tag: "{{ .Values.kubegems.version }}"
        registry: "{{ .Values.kubegems.registry }}"
        repository: "{{ .Values.kubegems.repository }}"
    controller:
      image:
        tag: "{{ .Values.kubegems.version }}"
        registry: "{{ .Values.kubegems.registry }}"
        repository: "{{ .Values.kubegems.repository }}"
