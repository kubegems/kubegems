apiVersion: plugins.kubegems.io/v1beta1
kind: Plugin
metadata:
  name: kubegems-local
  namespace: kubegems-local
spec:
  kind: helm
  enabled: true
  installNamespace: "{{ .Values.kubegems.namespace }}"
  dependencies:
    - name: cert-manager
  values:
    clusterName: "{{ .Values.clusterName }}"
    storageClass: "{{ .Values.storageClass }}"
    agent:
      extraArgs:
        - --api-prometheusserver=http://kube-prometheus-stack-prometheus.prometheus:9090
        - --api-alertmanagerserver=http://kube-prometheus-stack-alertmanager.prometheus:9093
        - --api-lokiserver=http://loki-stack.loki-stack:3100
        - --api-jaegerserber=http://jaeger-query.observability:16686
      image:
        tag: "{{ .Values.kubegems.version }}"
    controller:
      image:
        tag: "{{ .Values.kubegems.version }}"
